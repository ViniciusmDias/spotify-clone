{"ast":null,"code":"import _objectSpread from\"/home/vinicius/projects/react-17/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Switch,useRouteMatch}from'react-router-dom';import{getCategoriesFailed,getCategoriesRequest,getCategoriesSuccess,getUserFailed,getUserRequest,getUserSuccess,logout}from'../actions';import{endpoints}from'../modules/endpoints';import{request}from'../modules/request';import{WelcomeBox}from'../components';import{Categories,Dashboard,PrivateRoute,Topbar}from'../containers';import PlaylistsRoute from'./PlaylistsRoute';import TracksRoute from'./TracksRoute';var getCategories=endpoints.getCategories,getUserProfile=endpoints.getUserProfile;var DashboardRoute=function DashboardRoute(){var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,content=_useSelector.content,user=_useSelector.user;var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path,url=_useRouteMatch.url;var dispatch=useDispatch();useEffect(function(){var requestOptions=_objectSpread(_objectSpread({},getUserProfile.options),{},{headers:{'Authorization':\"Bearer \".concat(auth.accessToken)}});dispatch(getUserRequest());request(getUserProfile.url,requestOptions).then(function(data){return dispatch(getUserSuccess(data));}).catch(function(error){if(error===401){dispatch(logout());return;}dispatch(getUserFailed(error));});},[auth,dispatch]);useEffect(function(){var requestOptions=_objectSpread(_objectSpread({},getCategories.options),{},{headers:{'Authorization':\"Bearer \".concat(auth.accessToken)}});dispatch(getCategoriesRequest());request(getCategories.url,requestOptions).then(function(data){return dispatch(getCategoriesSuccess(data));}).catch(function(error){if(error===401){dispatch(logout());return;}dispatch(getCategoriesFailed(error));});},[auth,dispatch]);return/*#__PURE__*/React.createElement(Dashboard,null,/*#__PURE__*/React.createElement(Topbar,null),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(PrivateRoute,{exact:true,path:path},/*#__PURE__*/React.createElement(WelcomeBox,{name:user.name}),/*#__PURE__*/React.createElement(Categories,{isLoading:content.status==='running'&&content.categories.length===0,data:content.categories,url:url})),/*#__PURE__*/React.createElement(PrivateRoute,{exact:true,path:\"\".concat(path,\"/:categoryId\")},/*#__PURE__*/React.createElement(PlaylistsRoute,{path:path})),/*#__PURE__*/React.createElement(PrivateRoute,{exact:true,path:\"\".concat(path,\"/:categoryId/:playlistId\")},/*#__PURE__*/React.createElement(TracksRoute,null))));};export default DashboardRoute;","map":{"version":3,"sources":["/home/vinicius/projects/react-17/src/routes/DashboardRoute.jsx"],"names":["React","useEffect","useDispatch","useSelector","Switch","useRouteMatch","getCategoriesFailed","getCategoriesRequest","getCategoriesSuccess","getUserFailed","getUserRequest","getUserSuccess","logout","endpoints","request","WelcomeBox","Categories","Dashboard","PrivateRoute","Topbar","PlaylistsRoute","TracksRoute","getCategories","getUserProfile","DashboardRoute","state","auth","content","user","path","url","dispatch","requestOptions","options","headers","accessToken","then","data","catch","error","name","status","categories","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  Switch,\n  useRouteMatch,\n} from 'react-router-dom';\n\nimport {\n  getCategoriesFailed,\n  getCategoriesRequest,\n  getCategoriesSuccess,\n  getUserFailed,\n  getUserRequest,\n  getUserSuccess,\n  logout,\n} from '../actions';\n\nimport { endpoints } from '../modules/endpoints';\nimport { request } from '../modules/request';\n\nimport { WelcomeBox } from '../components';\nimport {\n  Categories,\n  Dashboard,\n  PrivateRoute,\n  Topbar,\n} from '../containers';\n\nimport PlaylistsRoute from './PlaylistsRoute';\nimport TracksRoute from './TracksRoute';\n\nconst { getCategories, getUserProfile,  } = endpoints;\n\nconst DashboardRoute = () => {\n  const { auth, content, user } = useSelector(state => state);\n  const { path, url } = useRouteMatch();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const requestOptions = {\n      ...getUserProfile.options,\n      headers: { 'Authorization': `Bearer ${auth.accessToken}` }\n    }\n\n    dispatch(getUserRequest());\n\n    request(getUserProfile.url, requestOptions)\n      .then(data => dispatch(getUserSuccess(data)))\n      .catch(error => {\n        if (error === 401) {\n          dispatch(logout());\n\n          return;\n        }\n\n        dispatch(getUserFailed(error));\n      });\n\n  }, [auth, dispatch]);\n\n  useEffect(() => {\n    const requestOptions = {\n      ...getCategories.options,\n      headers: { 'Authorization': `Bearer ${auth.accessToken}` }\n    }\n\n    dispatch(getCategoriesRequest());\n\n    request(getCategories.url, requestOptions)\n      .then(data => dispatch(getCategoriesSuccess(data)))\n      .catch(error => {\n        if (error === 401) {\n          dispatch(logout());\n\n          return;\n        }\n\n        dispatch(getCategoriesFailed(error))\n      });\n\n  }, [auth, dispatch]);\n\n  return (\n    <Dashboard>\n      <Topbar />\n\n      <Switch>\n        <PrivateRoute exact path={path}>\n          <WelcomeBox name={user.name} />\n\n          <Categories\n            isLoading={content.status === 'running' && content.categories.length === 0}\n            data={content.categories}\n            url={url}\n          />\n        </PrivateRoute>\n\n        <PrivateRoute exact path={`${path}/:categoryId`}>\n          <PlaylistsRoute path={path} />\n        </PrivateRoute>\n\n        <PrivateRoute exact path={`${path}/:categoryId/:playlistId`}>\n          <TracksRoute />\n        </PrivateRoute>\n      </Switch>\n    </Dashboard>\n  );\n}\n\nexport default DashboardRoute;"]},"metadata":{},"sourceType":"module"}